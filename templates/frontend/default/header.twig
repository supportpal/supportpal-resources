<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="csrf_token" content="{{ csrf_token() }}" />
    <meta name="token" content="{{ Input.get('token') }}" />
    <meta name="date_format" content="{{ convertMomentFormat(Config.get('settings.date_format')) }}" />
    <meta name="max_file_size" content="{{ max_file_size }}" />
    <meta name="allowed_files" content="{{ allowed_files }}" />
    {{ block('meta') }}

    <title>{{ company }} - {% block title %}{{ Lang.get('general.support_portal') }}{% endblock %}</title>

    {% if Config.get('settings.favicon') is not empty %}
        <link rel="icon" type="image/png" href="{{ Config.get('settings.favicon') }}" sizes="32x32" />
    {% endif %}

    <link href="{{ asset_rev('resources/assets/frontend/css/main.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset_rev('resources/assets/frontend/css/mobile.css') }}" rel="stylesheet" type="text/css" />

    <script src="{{ asset_rev('resources/assets/libs/jquery/js/jquery.min.js') }}" type="text/javascript"></script>
    <link href="{{ asset_rev('resources/assets/libs/jquery-ui/css/jquery-ui.min.css') }}" rel="stylesheet" type="text/css" />
    <script src="{{ asset_rev('resources/assets/libs/jquery-ui/js/jquery-ui.min.js') }}"></script>

    {{ block('scripts_header') }}

    {{ View.fireHook('frontend.head') }}

    {# Brand styling - delete these blocks if you don't want to apply the automatic brand colour styling. #}
    {% if Input.has('preview') or Session.has('preview_colour') %}
        <link href="{{ route('core.frontend.preview', Input.get('preview', Session.get('preview_colour'))) }}?v={{ 'now'|date('U') }}"
              rel="stylesheet" type="text/css" />
    {% elseif frontendCSS is not empty %}
        <style>
            {{ frontendCSS|raw }}
        </style>
    {% endif %}

    {% set route = Route.currentRouteName() %}
</head>

<body>

{{ View.fireHook('frontend.body_start') }}

<div id="desk_header">
    <div class="desk_wrapper">
        {{ View.fireHook('frontend.header_start') }}

        <div class="mobile_nav_button">
            <i class="fa fa-bars"></i>
            <div class="clear"></div>
        </div>

        {% if isModuleEnabled('Selfservice') and not selfserviceTypes.isEmpty() %}
            <div class="searchbox">
                <form name="search" action="{{ route('core.frontend.search') }}" method="post">
                    <input type="hidden" name="_token" value="{{ csrf_token() }}" />
                    <input type="text" name="query" placeholder="{{ Lang.get('core.search_placeholder') }}" />
                </form>
            </div>
        {% endif %}

        {% set frontend_logo_url = route('core.frontend.home') %}
        {% if Config.get('settings.frontend_logo_url') is not empty %}
            {% set frontend_logo_url = Config.get('settings.frontend_logo_url') %}
        {% endif %}
        <a href="{{ frontend_logo_url }}">
            <img src="{{ get_logo() }}" alt="{{ company }}" class="logo" />
        </a>

        {% block header %}{% endblock %}

        {{ View.fireHook('frontend.header_end') }}
    </div>
</div>

<div class="mobile_nav">
    {% include 'frontend.' ~ template ~ '.navigation' with { 'mobile': true } %}
</div>

<div class="desk_wrapper">

    {{ View.fireHook('frontend.wrapper_start') }}

    <div id="desk_content" class="left">

        {{ View.fireHook('frontend.content_start') }}

        <h1>
            {{ block('title') }}
        </h1>

        <div class="breadcrumb">
            <a href="{{ route('core.frontend.home') }}">{{ Lang.get('general.support_portal') }}</a> &nbsp;&raquo;&nbsp;
            {{ block('breadcrumb') }}
        </div>

        <div class="desk_content_padding">

            {{ View.fireHook('frontend.content_inner_start') }}

            {{ block('subtitle') }}

            <!-- Box to display success/error messages generated by JavaScript -->
            <div class="box" id="js-message-box" style="display: none"></div>

            {% if Session.has('success') %}
                <div class="success box">{{ Session.get('success')|raw }}</div>
            {% elseif Session.has('error') %}
                <div class="fail box">{{ Session.get('error')|raw }}</div>
            {% elseif Session.has('warning') %}
                <div class="warning box">{{ Session.get('warning')|raw }}</div>
            {% endif %}

            {% if errors|default is not empty and errors.count() %}
                <div class="fail box">
                    <strong>{{ Lang.get('messages.please_correct') }}</strong><br />
                    {% for error in errors.all() %}
                        {{ error }}<br />
                    {% endfor %}
                </div>
            {% endif %}

            {% block content %}{% endblock %}

            {{ View.fireHook('frontend.content_inner_end') }}

        </div>